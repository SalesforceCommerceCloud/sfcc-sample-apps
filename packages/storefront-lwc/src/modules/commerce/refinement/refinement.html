<!--
    Copyright (c) 2020, salesforce.com, inc.
    All rights reserved.
    SPDX-License-Identifier: BSD-3-Clause
    For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause
-->
<template>
    <div if:true={refinement.values} key={refinement.attributeId} class={cardClass}>
        <div class='card-header'>
            <h5 class="collapsible-card-title" aria-expanded={expanded} onclick={toggleDropdown}>{refinement.label}</h5>
        </div>

        <div class='card-body'>
            <div class="container-fluid">
                <div class="row">
                    <template for:each={refinement.values} for:item="refinementValue">
                        <template if:false={refinementValue.isCategory}>
                            <div if:true={refinementValue.toDisplay} key={refinementValue.key} class="form-check col-sm-3 col-md-12">
                                <input class="form-check-input" type="checkbox" value={refinementValue.title} id={refinementValue.key} onclick={refinementValue.toggleRefinement}>
                                <label class="form-check-label refinement-label" for={refinementValue.key}>
                                    <div if:false={refinementValue.isColor} title={refinementValue.title}>
                                        <div>{refinementValue.label} ({refinementValue.hitCount})</div>
                                    </div>

                                    <div if:true={refinementValue.isColor} title={refinementValue.title}>
                                        <div class={refinementValue.colorClassNames}></div>
                                        <div class="color-refinement-label d-inline">{refinementValue.label} ({refinementValue.hitCount})</div>
                                    </div>
                                </label>
                            </div>
                        </template>

                        <template if:true={refinementValue.isCategory}>
                            <div class="col-12 category-refinement" key={refinementValue.key}>
                                <commerce-category-refinement refinement={refinementValue}></commerce-category-refinement>
                            </div>
                        </template>
                    </template>
                </div>
            </div>
        </div>
    </div>
</template>
